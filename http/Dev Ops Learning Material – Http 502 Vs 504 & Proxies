# HTTP 502 vs 504 â€“ LOAD BALANCER & PROXY MENTALNI MODEL

> Ovo je **jedan od najvaÅ¾nijih dokumenata za DevOps razmiÅ¡ljanje**.
> Ako ovo razumeÅ¡ â€“ pola produkcionih incidenata Ä‡e ti biti jasnije.

---

## LEKCIJA 1: GDE SE POJAVLJUJU 502 I 504?

### 1ï¸âƒ£ KljuÄna Äinjenica (ZAPAMTI)

> **502 i 504 NE dolaze od aplikacije.**
> Dolaze od **posrednika**.

Ti posrednici su:

* Load Balancer
* Reverse Proxy (Nginx, Traefik, Envoy)
* API Gateway

Ako nema posrednika â†’ skoro nikad neÄ‡eÅ¡ videti 502/504.

---

## LEKCIJA 2: MENTALNI MODEL (NAJBITNIJE)

Zamisli lanac:

```
KLIJENT â†’ PROXY â†’ APLIKACIJA
```

Proxy je:

* prevodilac
* zaÅ¡titar
* saobraÄ‡ajni policajac

On prima request od klijenta i **prosleÄ‘uje** ga aplikaciji.

---

## LEKCIJA 3: Å TA JE 502 â€“ BAD GATEWAY

### 1ï¸âƒ£ Å ta znaÄi 502?

> Proxy je pokuÅ¡ao da priÄa sa aplikacijom,
> ali je dobio **loÅ¡ ili nevaÅ¾eÄ‡i odgovor**.

---

### 2ï¸âƒ£ TipiÄni uzroci 502

* aplikacija je pala
* pogreÅ¡an port
* pogreÅ¡an protocol (HTTP vs HTTPS)
* aplikacija se restartuje

Mentalna slika:

> Proxy kuca na vrata aplikacije â€“ niko ne odgovara kako treba.

---

### 3ï¸âƒ£ Kako 502 izgleda u realnosti

* deploy u toku
* container se restartuje
* backend joÅ¡ nije spreman

Proxy kaÅ¾e klijentu:

> "Ne mogu da dobijem normalan odgovor od backend-a"

---

## LEKCIJA 4: Å TA JE 504 â€“ GATEWAY TIMEOUT

### 1ï¸âƒ£ Å ta znaÄi 504?

> Proxy je poslao request aplikaciji,
> ali je **Äekao predugo**.

---

### 2ï¸âƒ£ TipiÄni uzroci 504

* aplikacija je spora
* baza ne odgovara
* deadlock
* timeout u mreÅ¾i

Mentalna slika:

> Proxy stoji i Äekaâ€¦ i Äekaâ€¦ i odustaje.

---

## LEKCIJA 5: 502 vs 504 â€“ KLJUÄŒNA RAZLIKA

| Kod | Problem                |
| --- | ---------------------- |
| 502 | Neispravan odgovor     |
| 504 | Nema odgovora na vreme |

Jedna reÄenica:

* **502** = neÅ¡to je pogreÅ¡no
* **504** = neÅ¡to je presporo

---

## LEKCIJA 6: DEVOPS DEBUG FLOW (ZLATNO PRAVILO)

Ako vidiÅ¡ **502**:

1. Proveri da li aplikacija radi
2. Proveri port
3. Proveri protocol

Ako vidiÅ¡ **504**:

1. Proveri response time
2. Proveri bazu
3. Proveri timeouts

âŒ Nikad ne poÄinji od frontenda.

---

## LEKCIJA 7: KAKO SE OVO VIDI U PRODUKCIJI

### Logovi

* proxy access log â†’ status 502/504
* backend log â†’ Äesto PRAZAN kod 504

### Monitoring

* poveÄ‡an latency
* CPU / Memory spike

---

## LEKCIJA 8: JEDNA STVAR ZA PAMÄ†ENJE

> 502 i 504 su **proxy problemi**, ne browser problemi.

Ako to znaÅ¡:

* znaÅ¡ gde da gledaÅ¡
* Å¡tediÅ¡ sate debugovanja

---

## LEKCIJA 9: PITANJA ZA RAZMIÅ LJANJE

* ZaÅ¡to 504 Äesto nema backend log?
* ZaÅ¡to deploy Äesto izaziva 502?
* Gde se timeout konfiguriÅ¡e?

(Ovo ostavi za sledeÄ‡u voÅ¾nju.)

---

ğŸ“Œ SledeÄ‡i dokument:

* Reverse Proxy (Traefik / Nginx) â€“ bez konfiguracije
* Kako HTTP prelazi u HTTPS
